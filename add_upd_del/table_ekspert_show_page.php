<?phprequire_once("../_functions.php");require_once("../_check_for_admin.php");require_once("../_mark_activity.php");// Если запрос идёт не из Ajaxif( $_SERVER['HTTP_X_REQUESTED_WITH'] != "XMLHttpRequest" ){    exit("Access denied!");}//-------------------------------------------------------------------------------------------------//$sortirovka = check_string($_GET['sortirovka']);$filtr_fio = check_string($_GET['filtr_fio']);$filtr_id_yroven_obrazov = check_string($_GET['filtr_id_yroven_obrazov']);//-------------------------------------------------------------------------------------------------//$page = check_string($_GET['page']);$max_values_in_table = check_string($_GET['max_values_in_table']);if($page=='') $page=1;if($max_values_in_table=='') $max_values_in_table=10;//-------------------------------------------------------------------------------------------------//if($sortirovka!=0){    if($sortirovka==1){        $str_sortirovka = " order by teksperttest.fio ";    }}else{    $str_sortirovka = " order by teksperttest.d_cr desc ";}if ($filtr_fio != ''){    $str_filtr_fio = " (teksperttest.fio like'%$filtr_fio%') ";}else{    $str_filtr_fio = " 1 ";}if ($filtr_id_yroven_obrazov != ''){    $str_filtr_id_yroven_obrazov = " teksperttest.id_yroven_obrazov=$filtr_id_yroven_obrazov ";}else{    $str_filtr_id_yroven_obrazov = " 1 ";}//-------------------------------------------------------------------------------------------------//if(1) {    $sql = "SELECT DISTINCT teksperttest.id, teksperttest.fio,tvidi_yroven_obrazov.name,if(teksperttest.test_result_confirm=1,'Да',''), teksperttest.d_cr FROM teksperttest left join tvidi_yroven_obrazov on tvidi_yroven_obrazov.id=teksperttest.id_yroven_obrazov WHERE teksperttest.udln is null and $str_filtr_fio and $str_filtr_id_yroven_obrazov $str_sortirovka";    $res = mysqli_query($db, $sql);    //------------------------------------------------------------//    $max_row = $res->num_rows;    $max_page = intval($max_row / $max_values_in_table);    if ($max_row % $max_values_in_table != 0) $max_page += 1;    //------------------------------------------------------------//    //-------- pages -------//    echo"<nav><ul class='pagination'>";    if($page>1) echo"<li><a onclick='table_ekspert_show(0,".($page-1).")'>&#160;&#171;&#8212;&#8212;&#8212;&#8212;&#8212;&#160;</a></li>"; else echo"<li><a>&#160;&#171;&#8212;&#8212;&#8212;&#8212;&#8212;&#160;</a></li>";    if($page-3>=1) echo"<li><a onclick='table_ekspert_show(0,1)'>1</a></li>";    if($page>4) echo"<li><a>...</a></li>";    if($page-2>=1) echo"<li><a onclick='table_ekspert_show(0,".($page-2).")'>".($page-2)."</a></li>";    if($page-1>=1) echo"<li><a onclick='table_ekspert_show(0,".($page-1).")'>".($page-1)."</a></li>";    echo"<li class='active'><a>$page</a></li>";    if($page+1<=$max_page) echo"<li><a onclick='table_ekspert_show(0,".($page+1).")'>".($page+1)."</a></li>";    if($page+2<=$max_page) echo"<li><a onclick='table_ekspert_show(0,".($page+2).")'>".($page+2)."</a></li>";    if($page<$max_page-3) echo"<li><a>...</a></li>";    if($page+3<=$max_page) echo"<li><a onclick='table_ekspert_show(0,$max_page)'>$max_page</a></li>";    if($page<$max_page) echo"<li><a onclick='table_ekspert_show(0,".($page+1).")'>&#160;&#8212;&#8212;&#8212;&#8212;&#8212;&#187;&#160;</a></li>"; else echo"<li><a>&#160;&#8212;&#8212;&#8212;&#8212;&#8212;&#187;&#160;</a></li>";    echo"</ul></nav>";    //-------- pages -------//}?>